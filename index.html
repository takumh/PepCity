<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Takudzwanashe Michael Mhuru">
<meta name="dcterms.date" content="2023-05-01">

<title>PepCity: analyzing Guardiola’s impact on Manchester City’s performance</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">PepCity: analyzing Guardiola’s impact on Manchester City’s performance</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Takudzwanashe Michael Mhuru </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 1, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell" data-execution_count="41">
<div class="cell-output cell-output-display">
<style>
div.input {
    display:none;
}
</style>
</div>
</div>
<p><img src="city.jpg" alt="Manchester City Logo" width="700" height="400"></p>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<section id="background-and-motivation" class="level2">
<h2 class="anchored" data-anchor-id="background-and-motivation">Background and Motivation</h2>
<p>Manchester City Football club is considered one of the best football teams in the world. They have won the English premier league four times in the last five seasons and are on track to win their fifth title. They have also won multiple domestic cups in England and the UK. Manchester city havent always been a successfull club however, and some fans argue that their recent success has only come as a result of ownership change, massive spending and their latest manager, Pep Guardiola. My goal was to investigate Manchester City’s history in the EPL and compare their recent performances under Pep to previous managers.</p>
</section>
</section>
<section id="about-the-data" class="level1">
<h1>About the data</h1>
<p>For my analysis, I used two datasets sourced from Kaggle in csv format. One contains all Premier League matches played since the EPL’s inception in 1992 up to the recently ended 2022 season. The other dataset contains tweets related to all premier league teams sourced from 2020 for the months of July to October that capture most of the 2020 - 2021 season.</p>
</section>
<section id="methodology" class="level1">
<h1>Methodology</h1>
<section id="wrangling" class="level2">
<h2 class="anchored" data-anchor-id="wrangling">Wrangling</h2>
<p>The first task was to extract data relating to Manchester city from both the EPL dataset as well as the Tweets dataset. I then separated the data for home and away games and further separated it for games played before Pep Guardiola became coach (1992-2016) and for those played after he became coach (2016-2022). This was achieved using masks.</p>
</section>
</section>
<section id="analysis" class="level1">
<h1>Analysis</h1>
<section id="overall-team-statistics" class="level2">
<h2 class="anchored" data-anchor-id="overall-team-statistics">Overall team statistics</h2>
<section id="w-d-l-distribution" class="level3">
<h3 class="anchored" data-anchor-id="w-d-l-distribution">W-D-L distribution</h3>
<p>Firstly, I wanted to look at the distribution of wins, losses and draws for Manchester City across all games in its Premier League history. The following plots show those results aggregated as percentages by home games, away games and the totals.</p>
<div class="cell" data-execution_count="26">
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>From the plots, we can see that Manchester City has won nearly 60% of their home games, 40% of away games and about 50% of their matches overall. They have drawn about 20% of home games which is equally as much as they have lost at home, nearly 25% of their away games and about 20% overall. Manchester City have lost near 35% of their away games and 30% games overall. These stats are really impressive for a team that has been relegated several times in the past.</p>
</section>
<section id="goals-conceded-vs.-goals-scored-per-team" class="level3">
<h3 class="anchored" data-anchor-id="goals-conceded-vs.-goals-scored-per-team">Goals conceded vs.&nbsp;Goals scored per team</h3>
<p>I also wanted to visualize the goals scoredand conceeded by Manchester City against all their opponents in the Premier league to see how they match up.</p>
<div class="cell" data-scrolled="true" data-execution_count="29">
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p1985">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p1985");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.1.0.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p1985")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="8990d305-642c-47ed-845a-b3a0ba1f71a1" data-root-id="p2098" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"acdf7912-a781-449f-86c1-7c579dea682c":{"version":"3.1.0","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Row","id":"p2098","attributes":{"children":[{"type":"object","name":"Figure","id":"p1992","attributes":{"width":500,"x_range":{"type":"object","name":"DataRange1d","id":"p1994"},"y_range":{"type":"object","name":"FactorRange","id":"p2004","attributes":{"factors":["Aston Villa","Newcastle Utd","Everton","Tottenham","Liverpool","Arsenal","West Ham","Southampton","Sunderland","Manchester Utd","Norwich City","Crystal Palace","Fulham","West Brom","Chelsea","Burnley","Stoke City","Watford","Blackburn","Leicester City","QPR","Swansea City","Wolves","Bolton","Bournemouth","Portsmouth","Leeds United","Birmingham City","Brighton","Hull City","Ipswich Town","Wigan Athletic","Charlton Ath","Middlesbrough","Cardiff City","Sheffield Weds","Huddersfield","Nott'ham Forest","Sheffield Utd","Coventry City","Oldham Athletic","Wimbledon","Reading","Brentford","Bradford City","Swindon Town","Blackpool","Derby County"],"range_padding":0.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p2006"},"y_scale":{"type":"object","name":"CategoricalScale","id":"p2008"},"title":{"type":"object","name":"Title","id":"p1995","attributes":{"text":"All Home Game Results"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p2062","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1986","attributes":{"selected":{"type":"object","name":"Selection","id":"p1988","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1987"},"data":{"type":"map","entries":[["team",{"type":"ndarray","array":["Aston Villa","Newcastle Utd","Everton","Tottenham","Liverpool","Arsenal","West Ham","Southampton","Sunderland","Manchester Utd","Norwich City","Crystal Palace","Fulham","West Brom","Chelsea","Burnley","Stoke City","Watford","Blackburn","Leicester City","QPR","Swansea City","Wolves","Bolton","Bournemouth","Portsmouth","Leeds United","Birmingham City","Brighton","Hull City","Ipswich Town","Wigan Athletic","Charlton Ath","Middlesbrough","Cardiff City","Sheffield Weds","Huddersfield","Nott'ham Forest","Sheffield Utd","Coventry City","Oldham Athletic","Wimbledon","Reading","Brentford","Bradford City","Swindon Town","Blackpool","Derby County"],"shape":[48],"dtype":"object","order":"little"}],["goals_for",{"type":"ndarray","array":{"type":"bytes","data":"EQAAAA0AAAAYAAAAIQAAABwAAAAmAAAADQAAABUAAAAPAAAAIQAAAAgAAAAJAAAADgAAAAkAAAAdAAAABgAAAAMAAAADAAAAFAAAABMAAAAHAAAAAwAAAAoAAAAIAAAAAwAAAAMAAAAJAAAAAgAAAAEAAAAEAAAABQAAAAIAAAAIAAAACAAAAAIAAAAHAAAAAQAAAAYAAAAAAAAABAAAAAQAAAACAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA"},"shape":[48],"dtype":"int32","order":"little"}],["goals_against",{"type":"ndarray","array":{"type":"bytes","data":"OgAAADkAAAAvAAAAKwAAACkAAAAoAAAAJgAAACYAAAAlAAAAIgAAACEAAAAeAAAAHgAAAB0AAAAdAAAAGwAAABoAAAAXAAAAFgAAABYAAAAUAAAAEwAAABMAAAATAAAAEgAAABAAAAAQAAAADgAAAA0AAAAMAAAACQAAAAkAAAAJAAAACAAAAAYAAAAGAAAABgAAAAYAAAAFAAAABAAAAAQAAAAEAAAAAwAAAAIAAAACAAAAAgAAAAEAAAABAAAA"},"shape":[48],"dtype":"int32","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"p2063","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2064"}}},"glyph":{"type":"object","name":"HBar","id":"p2059","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"fill_color":{"type":"value","value":"#EC3325"},"hatch_color":{"type":"value","value":"#EC3325"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2060","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2061","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"p2073","attributes":{"data_source":{"id":"p1986"},"view":{"type":"object","name":"CDSView","id":"p2074","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2075"}}},"glyph":{"type":"object","name":"HBar","id":"p2070","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"fill_color":{"type":"value","value":"#6CABDD"},"hatch_color":{"type":"value","value":"#6CABDD"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2071","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2072","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p2001"},"toolbar_location":null,"left":[{"type":"object","name":"CategoricalAxis","id":"p2017","attributes":{"ticker":{"type":"object","name":"CategoricalTicker","id":"p2019"},"formatter":{"type":"object","name":"CategoricalTickFormatter","id":"p2018"},"axis_label":"Team","major_label_policy":{"type":"object","name":"AllLabels","id":"p2020"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p2010","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2012","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p2011"},"axis_label":"Goals","major_label_policy":{"type":"object","name":"AllLabels","id":"p2013"}}}],"center":[{"type":"object","name":"Grid","id":"p2016","attributes":{"axis":{"id":"p2010"}}},{"type":"object","name":"Grid","id":"p2022","attributes":{"dimension":1,"axis":{"id":"p2017"},"grid_line_color":null}},{"type":"object","name":"Legend","id":"p2065","attributes":{"orientation":"horizontal","items":[{"type":"object","name":"LegendItem","id":"p2066","attributes":{"label":{"type":"value","value":"Goals for team"},"renderers":[{"id":"p2062"}]}},{"type":"object","name":"LegendItem","id":"p2076","attributes":{"label":{"type":"value","value":"Goals for ManCity"},"renderers":[{"id":"p2073"}]}}]}}]}},{"type":"object","name":"Figure","id":"p2024","attributes":{"width":500,"x_range":{"type":"object","name":"DataRange1d","id":"p2026"},"y_range":{"type":"object","name":"FactorRange","id":"p2036","attributes":{"factors":["Liverpool","Chelsea","Tottenham","Manchester Utd","Everton","Arsenal","Newcastle Utd","Middlesbrough","West Ham","Aston Villa","Blackburn","Fulham","Southampton","Bolton","West Brom","Norwich City","Leeds United","Wigan Athletic","Charlton Ath","Portsmouth","Coventry City","Birmingham City","Stoke City","Sunderland","Wolves","Leicester City","QPR","Ipswich Town","Swansea City","Crystal Palace","Wimbledon","Hull City","Brighton","Burnley","Nott'ham Forest","Watford","Reading","Sheffield Weds","Cardiff City","Blackpool","Derby County","Bradford City","Bournemouth","Swindon Town","Sheffield Utd","Huddersfield","Oldham Athletic","Brentford"],"range_padding":0.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p2038"},"y_scale":{"type":"object","name":"CategoricalScale","id":"p2040"},"title":{"type":"object","name":"Title","id":"p2027","attributes":{"text":"All Away Game Results"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p2083","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1989","attributes":{"selected":{"type":"object","name":"Selection","id":"p1991","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1990"},"data":{"type":"map","entries":[["team",{"type":"ndarray","array":["Liverpool","Chelsea","Tottenham","Manchester Utd","Everton","Arsenal","Newcastle Utd","Middlesbrough","West Ham","Aston Villa","Blackburn","Fulham","Southampton","Bolton","West Brom","Norwich City","Leeds United","Wigan Athletic","Charlton Ath","Portsmouth","Coventry City","Birmingham City","Stoke City","Sunderland","Wolves","Leicester City","QPR","Ipswich Town","Swansea City","Crystal Palace","Wimbledon","Hull City","Brighton","Burnley","Nott'ham Forest","Watford","Reading","Sheffield Weds","Cardiff City","Blackpool","Derby County","Bradford City","Bournemouth","Swindon Town","Sheffield Utd","Huddersfield","Oldham Athletic","Brentford"],"shape":[48],"dtype":"object","order":"little"}],["goals_for",{"type":"ndarray","array":{"type":"bytes","data":"MgAAACoAAAAmAAAAJgAAACEAAAAhAAAAGwAAABsAAAAbAAAAFwAAABMAAAARAAAAEAAAAA0AAAANAAAADQAAAA0AAAAMAAAACwAAAAsAAAAKAAAACQAAAAkAAAAJAAAACQAAAAgAAAAIAAAACAAAAAcAAAAHAAAABgAAAAYAAAAFAAAABQAAAAQAAAAEAAAAAwAAAAMAAAADAAAAAgAAAAIAAAACAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAA"},"shape":[48],"dtype":"int32","order":"little"}],["goals_against",{"type":"ndarray","array":{"type":"bytes","data":"GwAAABcAAAAbAAAAIQAAAB4AAAAYAAAAIwAAAAsAAAAlAAAAIAAAABEAAAAfAAAAGQAAAA0AAAAcAAAAFgAAAAsAAAALAAAADAAAAAgAAAAFAAAACAAAAA4AAAASAAAAEQAAAA4AAAAJAAAABgAAAA8AAAAQAAAAAQAAAAwAAAARAAAAEgAAAAIAAAAXAAAAAgAAAAYAAAAHAAAAAwAAAAIAAAACAAAADAAAAAMAAAAFAAAABQAAAAEAAAABAAAA"},"shape":[48],"dtype":"int32","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"p2084","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2085"}}},"glyph":{"type":"object","name":"HBar","id":"p2080","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"fill_color":{"type":"value","value":"#EC3325"},"hatch_color":{"type":"value","value":"#EC3325"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2081","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2082","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"p2094","attributes":{"data_source":{"id":"p1989"},"view":{"type":"object","name":"CDSView","id":"p2095","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2096"}}},"glyph":{"type":"object","name":"HBar","id":"p2091","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"fill_color":{"type":"value","value":"#6CABDD"},"hatch_color":{"type":"value","value":"#6CABDD"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2092","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2093","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p2033"},"toolbar_location":null,"left":[{"type":"object","name":"CategoricalAxis","id":"p2049","attributes":{"ticker":{"type":"object","name":"CategoricalTicker","id":"p2051"},"formatter":{"type":"object","name":"CategoricalTickFormatter","id":"p2050"},"axis_label":"Team","major_label_policy":{"type":"object","name":"AllLabels","id":"p2052"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p2042","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2044","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p2043"},"axis_label":"Goals","major_label_policy":{"type":"object","name":"AllLabels","id":"p2045"}}}],"center":[{"type":"object","name":"Grid","id":"p2048","attributes":{"axis":{"id":"p2042"}}},{"type":"object","name":"Grid","id":"p2054","attributes":{"dimension":1,"axis":{"id":"p2049"},"grid_line_color":null}},{"type":"object","name":"Legend","id":"p2086","attributes":{"orientation":"horizontal","items":[{"type":"object","name":"LegendItem","id":"p2087","attributes":{"label":{"type":"value","value":"Goals for team"},"renderers":[{"id":"p2083"}]}},{"type":"object","name":"LegendItem","id":"p2097","attributes":{"label":{"type":"value","value":"Goals for ManCity"},"renderers":[{"id":"p2094"}]}}]}}]}}]}}],"callbacks":{"type":"map"}}};
  const render_items = [{"docid":"acdf7912-a781-449f-86c1-7c579dea682c","roots":{"p2098":"8990d305-642c-47ed-845a-b3a0ba1f71a1"},"root_ids":["p2098"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
</div>
<p>From the plots, we can see that Manchester city have scored more goals against their opponents for both home and away games. Generally, it seems that Manchester city score more goals at home than away and concede less at home.</p>
</section>
</section>
<section id="how-good-is-pep-guardiola" class="level2">
<h2 class="anchored" data-anchor-id="how-good-is-pep-guardiola">How good is Pep Guardiola?</h2>
<p><img src="pep.jpg" alt="Manchester City Logo" width="400" height="400"></p>
<p>I also wanted to investigate the impact of Pep Guardiola on Manchester City’s performances. Of course, it is important to realise that more goes into the teams statistics than the manager, with factors such as squad depth and signings, opposition squad depth and injuries playing a part. It can be argued however that these factors vary per season and per manager and across all teams such that it is fairly plausible to compare Pep Guardiola’s performance to that of previous managers with different teams under their watch.</p>
<section id="w-d-l-distribution-1" class="level3">
<h3 class="anchored" data-anchor-id="w-d-l-distribution-1">W-D-L distribution</h3>
<p>Firstly, I plotted the win, draw and loss distribution of Manchester City for home, away and all games both before and under Pep Guardiola.</p>
<section id="results-before-pep" class="level4">
<h4 class="anchored" data-anchor-id="results-before-pep">Results Before Pep</h4>
<div class="cell" data-scrolled="true" data-execution_count="30">
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-14-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="results-under-pep" class="level4">
<h4 class="anchored" data-anchor-id="results-under-pep">Results under Pep</h4>
<div class="cell" data-execution_count="31">
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-15-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>From the plots we can see that before Pep Guardiola, Manchester City won nearly 50% of their home games, 30% of their away games and 40% overall. They drew just over 20% of their home games, about 25% of their away games and overall. At home, Manchester City lost about 25% of their home games before Pep Guardiola became manager, over 25% of their away games and near;y 35% of all their games.</p>
<p>Under Pep Guardiola, these stats improved significantly. Manchester City have won nearly 80% of all their home games, 70% of their away games and over 70% overall. They have only drawn about 10% at home and away and overall and they have lost less than 10% of their home games, about 15% of their away games and about 10% overall. This shows a remarkable improvement in both home and away games under Pep Guardiola.</p>
</section>
</section>
<section id="goals-scored-and-conceded-before-pep-guardiola" class="level3">
<h3 class="anchored" data-anchor-id="goals-scored-and-conceded-before-pep-guardiola">Goals scored and conceded before Pep Guardiola</h3>
<p>I also wanted to visually compare the goals scored and conceded by Manchester City before and after Pep Guardiola became manager.</p>
<div class="cell" data-execution_count="33">
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p2373">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p2373");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.1.0.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p2373")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="a6fcc0e2-c8a5-407e-a56e-28730ef70f6d" data-root-id="p2486" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"bcba5c82-6044-4b0b-a89f-5a93d145b88f":{"version":"3.1.0","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Row","id":"p2486","attributes":{"children":[{"type":"object","name":"Figure","id":"p2380","attributes":{"width":500,"x_range":{"type":"object","name":"DataRange1d","id":"p2382"},"y_range":{"type":"object","name":"FactorRange","id":"p2392","attributes":{"factors":["Aston Villa","Newcastle Utd","Sunderland","Everton","Tottenham","West Ham","Liverpool","Fulham","Manchester Utd","Norwich City","Arsenal","West Brom","Blackburn","Southampton","QPR","Bolton","Stoke City","Chelsea","Portsmouth","Birmingham City","Crystal Palace","Swansea City","Wolves","Hull City","Wigan Athletic","Ipswich Town","Charlton Ath","Leeds United","Middlesbrough","Sheffield Weds","Nott'ham Forest","Burnley","Bournemouth","Cardiff City","Oldham Athletic","Wimbledon","Coventry City","Leicester City","Reading","Swindon Town","Watford","Sheffield Utd","Bradford City","Blackpool","Derby County"],"range_padding":0.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p2394"},"y_scale":{"type":"object","name":"CategoricalScale","id":"p2396"},"title":{"type":"object","name":"Title","id":"p2383","attributes":{"text":"All Home Game Results before Pep"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p2450","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p2374","attributes":{"selected":{"type":"object","name":"Selection","id":"p2376","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2375"},"data":{"type":"map","entries":[["team",{"type":"ndarray","array":["Aston Villa","Newcastle Utd","Sunderland","Everton","Tottenham","West Ham","Liverpool","Fulham","Manchester Utd","Norwich City","Arsenal","West Brom","Blackburn","Southampton","QPR","Bolton","Stoke City","Chelsea","Portsmouth","Birmingham City","Crystal Palace","Swansea City","Wolves","Hull City","Wigan Athletic","Ipswich Town","Charlton Ath","Leeds United","Middlesbrough","Sheffield Weds","Nott'ham Forest","Burnley","Bournemouth","Cardiff City","Oldham Athletic","Wimbledon","Coventry City","Leicester City","Reading","Swindon Town","Watford","Sheffield Utd","Bradford City","Blackpool","Derby County"],"shape":[45],"dtype":"object","order":"little"}],["goals_for",{"type":"ndarray","array":{"type":"bytes","data":"DwAAAAsAAAAOAAAAFAAAABkAAAAJAAAAFwAAAA4AAAAYAAAACAAAACMAAAAHAAAAFAAAAA8AAAAHAAAACAAAAAEAAAAXAAAAAwAAAAIAAAACAAAAAgAAAAcAAAADAAAAAgAAAAUAAAAIAAAABwAAAAcAAAAHAAAABgAAAAUAAAABAAAAAgAAAAQAAAACAAAABAAAAAgAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},"shape":[45],"dtype":"int32","order":"little"}],["goals_against",{"type":"ndarray","array":{"type":"bytes","data":"MgAAACgAAAAjAAAAIAAAAB0AAAAaAAAAGgAAABkAAAAYAAAAFwAAABcAAAAWAAAAFgAAABYAAAAUAAAAEwAAABMAAAARAAAAEAAAAA4AAAAMAAAADAAAAAsAAAAJAAAACQAAAAkAAAAJAAAACAAAAAcAAAAGAAAABgAAAAUAAAAFAAAABAAAAAQAAAAEAAAABAAAAAMAAAADAAAAAgAAAAIAAAACAAAAAgAAAAEAAAABAAAA"},"shape":[45],"dtype":"int32","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"p2451","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2452"}}},"glyph":{"type":"object","name":"HBar","id":"p2447","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"fill_color":{"type":"value","value":"#EC3325"},"hatch_color":{"type":"value","value":"#EC3325"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2448","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2449","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"p2461","attributes":{"data_source":{"id":"p2374"},"view":{"type":"object","name":"CDSView","id":"p2462","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2463"}}},"glyph":{"type":"object","name":"HBar","id":"p2458","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"fill_color":{"type":"value","value":"#6CABDD"},"hatch_color":{"type":"value","value":"#6CABDD"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2459","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2460","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p2389"},"toolbar_location":null,"left":[{"type":"object","name":"CategoricalAxis","id":"p2405","attributes":{"ticker":{"type":"object","name":"CategoricalTicker","id":"p2407"},"formatter":{"type":"object","name":"CategoricalTickFormatter","id":"p2406"},"axis_label":"Team","major_label_policy":{"type":"object","name":"AllLabels","id":"p2408"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p2398","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2400","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p2399"},"axis_label":"Goals","major_label_policy":{"type":"object","name":"AllLabels","id":"p2401"}}}],"center":[{"type":"object","name":"Grid","id":"p2404","attributes":{"axis":{"id":"p2398"}}},{"type":"object","name":"Grid","id":"p2410","attributes":{"dimension":1,"axis":{"id":"p2405"},"grid_line_color":null}},{"type":"object","name":"Legend","id":"p2453","attributes":{"orientation":"horizontal","items":[{"type":"object","name":"LegendItem","id":"p2454","attributes":{"label":{"type":"value","value":"Goals for team"},"renderers":[{"id":"p2450"}]}},{"type":"object","name":"LegendItem","id":"p2464","attributes":{"label":{"type":"value","value":"Goals for ManCity"},"renderers":[{"id":"p2461"}]}}]}}]}},{"type":"object","name":"Figure","id":"p2412","attributes":{"width":500,"x_range":{"type":"object","name":"DataRange1d","id":"p2414"},"y_range":{"type":"object","name":"FactorRange","id":"p2424","attributes":{"factors":["Liverpool","Chelsea","Manchester Utd","Tottenham","Arsenal","Everton","Middlesbrough","West Ham","Newcastle Utd","Aston Villa","Blackburn","Fulham","Bolton","Southampton","Leeds United","Wigan Athletic","West Brom","Charlton Ath","Portsmouth","Norwich City","Coventry City","Birmingham City","Sunderland","Stoke City","QPR","Ipswich Town","Hull City","Wimbledon","Swansea City","Crystal Palace","Nott'ham Forest","Sheffield Weds","Cardiff City","Wolves","Reading","Blackpool","Watford","Burnley","Bradford City","Derby County","Leicester City","Sheffield Utd","Swindon Town","Oldham Athletic","Bournemouth"],"range_padding":0.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p2426"},"y_scale":{"type":"object","name":"CategoricalScale","id":"p2428"},"title":{"type":"object","name":"Title","id":"p2415","attributes":{"text":"All Away Game Results before Pep"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p2471","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p2377","attributes":{"selected":{"type":"object","name":"Selection","id":"p2379","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2378"},"data":{"type":"map","entries":[["team",{"type":"ndarray","array":["Liverpool","Chelsea","Manchester Utd","Tottenham","Arsenal","Everton","Middlesbrough","West Ham","Newcastle Utd","Aston Villa","Blackburn","Fulham","Bolton","Southampton","Leeds United","Wigan Athletic","West Brom","Charlton Ath","Portsmouth","Norwich City","Coventry City","Birmingham City","Sunderland","Stoke City","QPR","Ipswich Town","Hull City","Wimbledon","Swansea City","Crystal Palace","Nott'ham Forest","Sheffield Weds","Cardiff City","Wolves","Reading","Blackpool","Watford","Burnley","Bradford City","Derby County","Leicester City","Sheffield Utd","Swindon Town","Oldham Athletic","Bournemouth"],"shape":[45],"dtype":"object","order":"little"}],["goals_for",{"type":"ndarray","array":{"type":"bytes","data":"JwAAACMAAAAiAAAAHgAAAB4AAAAaAAAAGQAAABcAAAAUAAAAFAAAABMAAAARAAAADQAAAA0AAAAMAAAADAAAAAsAAAALAAAACwAAAAoAAAAKAAAACQAAAAkAAAAIAAAACAAAAAgAAAAGAAAABgAAAAYAAAAFAAAABAAAAAMAAAADAAAAAwAAAAMAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAABAAAAAQAAAAAAAAAAAAAA"},"shape":[45],"dtype":"int32","order":"little"}],["goals_against",{"type":"ndarray","array":{"type":"bytes","data":"EQAAABAAAAAZAAAAFwAAAAsAAAASAAAACQAAABEAAAAXAAAAFgAAABEAAAAaAAAADQAAABAAAAAGAAAACwAAABAAAAAMAAAACAAAABAAAAAFAAAACAAAABAAAAAIAAAACQAAAAYAAAAJAAAAAQAAAAgAAAAHAAAAAgAAAAYAAAACAAAABgAAAAIAAAADAAAAAwAAAAYAAAACAAAAAgAAAAUAAAADAAAAAwAAAAEAAAAEAAAA"},"shape":[45],"dtype":"int32","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"p2472","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2473"}}},"glyph":{"type":"object","name":"HBar","id":"p2468","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"fill_color":{"type":"value","value":"#EC3325"},"hatch_color":{"type":"value","value":"#EC3325"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2469","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2470","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"p2482","attributes":{"data_source":{"id":"p2377"},"view":{"type":"object","name":"CDSView","id":"p2483","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2484"}}},"glyph":{"type":"object","name":"HBar","id":"p2479","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"fill_color":{"type":"value","value":"#6CABDD"},"hatch_color":{"type":"value","value":"#6CABDD"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2480","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2481","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p2421"},"toolbar_location":null,"left":[{"type":"object","name":"CategoricalAxis","id":"p2437","attributes":{"ticker":{"type":"object","name":"CategoricalTicker","id":"p2439"},"formatter":{"type":"object","name":"CategoricalTickFormatter","id":"p2438"},"axis_label":"Team","major_label_policy":{"type":"object","name":"AllLabels","id":"p2440"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p2430","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2432","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p2431"},"axis_label":"Goals","major_label_policy":{"type":"object","name":"AllLabels","id":"p2433"}}}],"center":[{"type":"object","name":"Grid","id":"p2436","attributes":{"axis":{"id":"p2430"}}},{"type":"object","name":"Grid","id":"p2442","attributes":{"dimension":1,"axis":{"id":"p2437"},"grid_line_color":null}},{"type":"object","name":"Legend","id":"p2474","attributes":{"orientation":"horizontal","items":[{"type":"object","name":"LegendItem","id":"p2475","attributes":{"label":{"type":"value","value":"Goals for team"},"renderers":[{"id":"p2471"}]}},{"type":"object","name":"LegendItem","id":"p2485","attributes":{"label":{"type":"value","value":"Goals for ManCity"},"renderers":[{"id":"p2482"}]}}]}}]}}]}}],"callbacks":{"type":"map"}}};
  const render_items = [{"docid":"bcba5c82-6044-4b0b-a89f-5a93d145b88f","roots":{"p2486":"a6fcc0e2-c8a5-407e-a56e-28730ef70f6d"},"root_ids":["p2486"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
</div>
</section>
<section id="goals-scored-and-conceded-under-pep-guardiola" class="level3">
<h3 class="anchored" data-anchor-id="goals-scored-and-conceded-under-pep-guardiola">Goals scored and conceded under Pep Guardiola</h3>
<div class="cell" data-execution_count="34">
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p2791">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p2791");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.1.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.1.0.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p2791")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="6cee07be-74d7-40f3-89a1-dc726299ae27" data-root-id="p2904" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"a1414ee0-7e14-44ac-ad57-fbd004889178":{"version":"3.1.0","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Row","id":"p2904","attributes":{"children":[{"type":"object","name":"Figure","id":"p2798","attributes":{"width":500,"x_range":{"type":"object","name":"DataRange1d","id":"p2800"},"y_range":{"type":"object","name":"FactorRange","id":"p2810","attributes":{"factors":["Burnley","Watford","Leicester City","Crystal Palace","Arsenal","Newcastle Utd","Southampton","Everton","Liverpool","Tottenham","Bournemouth","Brighton","Chelsea","West Ham","Manchester Utd","Norwich City","Aston Villa","Leeds United","Wolves","Stoke City","Swansea City","West Brom","Huddersfield","Fulham","Sheffield Utd","Hull City","Cardiff City","Brentford","Sunderland","Middlesbrough"],"range_padding":0.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p2812"},"y_scale":{"type":"object","name":"CategoricalScale","id":"p2814"},"title":{"type":"object","name":"Title","id":"p2801","attributes":{"text":"All Home Game Results under Pep"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p2868","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p2792","attributes":{"selected":{"type":"object","name":"Selection","id":"p2794","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2793"},"data":{"type":"map","entries":[["team",{"type":"ndarray","array":["Burnley","Watford","Leicester City","Crystal Palace","Arsenal","Newcastle Utd","Southampton","Everton","Liverpool","Tottenham","Bournemouth","Brighton","Chelsea","West Ham","Manchester Utd","Norwich City","Aston Villa","Leeds United","Wolves","Stoke City","Swansea City","West Brom","Huddersfield","Fulham","Sheffield Utd","Hull City","Cardiff City","Brentford","Sunderland","Middlesbrough"],"shape":[30],"dtype":"object","order":"little"}],["goals_for",{"type":"ndarray","array":{"type":"bytes","data":"AQAAAAMAAAALAAAABwAAAAMAAAACAAAABgAAAAQAAAAFAAAACAAAAAIAAAABAAAABgAAAAQAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAgAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAA"},"shape":[30],"dtype":"int32","order":"little"}],["goals_against",{"type":"ndarray","array":{"type":"bytes","data":"FgAAABUAAAATAAAAEgAAABEAAAARAAAAEAAAAA8AAAAPAAAADgAAAA0AAAANAAAADAAAAAwAAAAKAAAACgAAAAgAAAAIAAAACAAAAAcAAAAHAAAABwAAAAYAAAAFAAAAAwAAAAMAAAACAAAAAgAAAAIAAAABAAAA"},"shape":[30],"dtype":"int32","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"p2869","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2870"}}},"glyph":{"type":"object","name":"HBar","id":"p2865","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"fill_color":{"type":"value","value":"#EC3325"},"hatch_color":{"type":"value","value":"#EC3325"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2866","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2867","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"p2879","attributes":{"data_source":{"id":"p2792"},"view":{"type":"object","name":"CDSView","id":"p2880","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2881"}}},"glyph":{"type":"object","name":"HBar","id":"p2876","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"fill_color":{"type":"value","value":"#6CABDD"},"hatch_color":{"type":"value","value":"#6CABDD"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2877","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2878","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p2807"},"toolbar_location":null,"left":[{"type":"object","name":"CategoricalAxis","id":"p2823","attributes":{"ticker":{"type":"object","name":"CategoricalTicker","id":"p2825"},"formatter":{"type":"object","name":"CategoricalTickFormatter","id":"p2824"},"axis_label":"Team","major_label_policy":{"type":"object","name":"AllLabels","id":"p2826"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p2816","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2818","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p2817"},"axis_label":"Goals","major_label_policy":{"type":"object","name":"AllLabels","id":"p2819"}}}],"center":[{"type":"object","name":"Grid","id":"p2822","attributes":{"axis":{"id":"p2816"}}},{"type":"object","name":"Grid","id":"p2828","attributes":{"dimension":1,"axis":{"id":"p2823"},"grid_line_color":null}},{"type":"object","name":"Legend","id":"p2871","attributes":{"orientation":"horizontal","items":[{"type":"object","name":"LegendItem","id":"p2872","attributes":{"label":{"type":"value","value":"Goals for team"},"renderers":[{"id":"p2868"}]}},{"type":"object","name":"LegendItem","id":"p2882","attributes":{"label":{"type":"value","value":"Goals for ManCity"},"renderers":[{"id":"p2879"}]}}]}}]}},{"type":"object","name":"Figure","id":"p2830","attributes":{"width":500,"x_range":{"type":"object","name":"DataRange1d","id":"p2832"},"y_range":{"type":"object","name":"FactorRange","id":"p2842","attributes":{"factors":["Liverpool","Tottenham","Chelsea","Newcastle Utd","Everton","Leicester City","Wolves","Brighton","West Ham","Manchester Utd","Arsenal","Southampton","Norwich City","Aston Villa","Burnley","West Brom","Middlesbrough","Crystal Palace","Watford","Bournemouth","Leeds United","Swansea City","Huddersfield","Stoke City","Cardiff City","Sunderland","Sheffield Utd","Hull City","Fulham","Brentford"],"range_padding":0.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p2844"},"y_scale":{"type":"object","name":"CategoricalScale","id":"p2846"},"title":{"type":"object","name":"Title","id":"p2833","attributes":{"text":"All Away Game Results under Pep"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p2889","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p2795","attributes":{"selected":{"type":"object","name":"Selection","id":"p2797","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2796"},"data":{"type":"map","entries":[["team",{"type":"ndarray","array":["Liverpool","Tottenham","Chelsea","Newcastle Utd","Everton","Leicester City","Wolves","Brighton","West Ham","Manchester Utd","Arsenal","Southampton","Norwich City","Aston Villa","Burnley","West Brom","Middlesbrough","Crystal Palace","Watford","Bournemouth","Leeds United","Swansea City","Huddersfield","Stoke City","Cardiff City","Sunderland","Sheffield Utd","Hull City","Fulham","Brentford"],"shape":[30],"dtype":"object","order":"little"}],["goals_for",{"type":"ndarray","array":{"type":"bytes","data":"CwAAAAgAAAAHAAAABwAAAAcAAAAGAAAABgAAAAUAAAAEAAAABAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAgAAAAIAAAACAAAAAgAAAAIAAAABAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},"shape":[30],"dtype":"int32","order":"little"}],["goals_against",{"type":"ndarray","array":{"type":"bytes","data":"CgAAAAQAAAAHAAAADAAAAAwAAAAJAAAACwAAABEAAAAUAAAACAAAAA0AAAAJAAAABgAAAAoAAAAMAAAADAAAAAIAAAAJAAAAFAAAAAgAAAAFAAAABwAAAAUAAAAGAAAABQAAAAIAAAACAAAAAwAAAAUAAAABAAAA"},"shape":[30],"dtype":"int32","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"p2890","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2891"}}},"glyph":{"type":"object","name":"HBar","id":"p2886","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"fill_color":{"type":"value","value":"#EC3325"},"hatch_color":{"type":"value","value":"#EC3325"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2887","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2888","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"right":{"type":"field","field":"goals_for"},"line_color":{"type":"value","value":"#EC3325"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#EC3325"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#EC3325"},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"p2900","attributes":{"data_source":{"id":"p2795"},"view":{"type":"object","name":"CDSView","id":"p2901","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2902"}}},"glyph":{"type":"object","name":"HBar","id":"p2897","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"fill_color":{"type":"value","value":"#6CABDD"},"hatch_color":{"type":"value","value":"#6CABDD"}}},"nonselection_glyph":{"type":"object","name":"HBar","id":"p2898","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"HBar","id":"p2899","attributes":{"y":{"type":"field","field":"team"},"height":{"type":"value","value":0.5},"left":{"type":"field","field":"goals_for"},"right":{"type":"field","field":"goals_against"},"line_color":{"type":"value","value":"#6CABDD"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#6CABDD"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"#6CABDD"},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p2839"},"toolbar_location":null,"left":[{"type":"object","name":"CategoricalAxis","id":"p2855","attributes":{"ticker":{"type":"object","name":"CategoricalTicker","id":"p2857"},"formatter":{"type":"object","name":"CategoricalTickFormatter","id":"p2856"},"axis_label":"Team","major_label_policy":{"type":"object","name":"AllLabels","id":"p2858"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p2848","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2850","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p2849"},"axis_label":"Goals","major_label_policy":{"type":"object","name":"AllLabels","id":"p2851"}}}],"center":[{"type":"object","name":"Grid","id":"p2854","attributes":{"axis":{"id":"p2848"}}},{"type":"object","name":"Grid","id":"p2860","attributes":{"dimension":1,"axis":{"id":"p2855"},"grid_line_color":null}},{"type":"object","name":"Legend","id":"p2892","attributes":{"orientation":"horizontal","items":[{"type":"object","name":"LegendItem","id":"p2893","attributes":{"label":{"type":"value","value":"Goals for team"},"renderers":[{"id":"p2889"}]}},{"type":"object","name":"LegendItem","id":"p2903","attributes":{"label":{"type":"value","value":"Goals for ManCity"},"renderers":[{"id":"p2900"}]}}]}}]}}]}}],"callbacks":{"type":"map"}}};
  const render_items = [{"docid":"a1414ee0-7e14-44ac-ad57-fbd004889178","roots":{"p2904":"6cee07be-74d7-40f3-89a1-dc726299ae27"},"root_ids":["p2904"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
</div>
<p>The results are not easily comparable since premier league teams are not constant and some teams that have historically frequently featured in the Premier league have not been promoted under Pep Guardiola’s charge. However we can still see that under Pep, the margins between goals scored and conceded have positively widened.</p>
</section>
</section>
</section>
<section id="xg-via-machine-learning" class="level1">
<h1>xG via Machine Learning</h1>
<p>To best learn how much Manchester City’s goal margins have improved under Pep Guardiola, I trained a simple machine learning model to predict the goals expected to be scored and conceded by Manchester City given a specific opponent. I further specified that the model should predict differently for home and away games as we have seen that there are significant differences in performance for games played at home and those played away. To get an idea of the model’s output, I selected 5 teams (Liverpool, Manchester United, Arsenal, Chelsea, Tottenham Hotspur),that have arguably been top teams historically in the Premier League and that would have faced Manchester City occasionally both before and after Pep Guardiola became manager. I also selected Watford, Southampton, Burnley, Aston Villa and Everton to add balance. The results are displayed below.</p>
<section id="expected-goals-before-pep" class="level2">
<h2 class="anchored" data-anchor-id="expected-goals-before-pep">Expected goals before Pep</h2>
<div class="cell" data-scrolled="true" data-execution_count="39">
<div class="cell-output cell-output-display">

<table style="display:inline; margin-right: 10px;"><tbody><tr><th>Home games</th><th>Away games</th></tr><tr><td><style type="text/css">
</style>
<table style="display:inline; margin-right: 10px;" id="T_25a6c">
  <thead>
    <tr>
      <th id="T_25a6c_level0_col0" class="col_heading level0 col0">Team</th>
      <th id="T_25a6c_level0_col1" class="col_heading level0 col1">xG against City</th>
      <th id="T_25a6c_level0_col2" class="col_heading level0 col2">xG for City</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="T_25a6c_row0_col0" class="data row0 col0">Arsenal</td>
      <td id="T_25a6c_row0_col1" class="data row0 col1">1.84</td>
      <td id="T_25a6c_row0_col2" class="data row0 col2">1.21</td>
    </tr>
    <tr>
      <td id="T_25a6c_row1_col0" class="data row1 col0">Chelsea</td>
      <td id="T_25a6c_row1_col1" class="data row1 col1">1.21</td>
      <td id="T_25a6c_row1_col2" class="data row1 col2">0.89</td>
    </tr>
    <tr>
      <td id="T_25a6c_row2_col0" class="data row2 col0">Liverpool</td>
      <td id="T_25a6c_row2_col1" class="data row2 col1">1.21</td>
      <td id="T_25a6c_row2_col2" class="data row2 col2">1.37</td>
    </tr>
    <tr>
      <td id="T_25a6c_row3_col0" class="data row3 col0">Manchester Utd</td>
      <td id="T_25a6c_row3_col1" class="data row3 col1">1.26</td>
      <td id="T_25a6c_row3_col2" class="data row3 col2">1.26</td>
    </tr>
    <tr>
      <td id="T_25a6c_row4_col0" class="data row4 col0">Tottenham</td>
      <td id="T_25a6c_row4_col1" class="data row4 col1">1.32</td>
      <td id="T_25a6c_row4_col2" class="data row4 col2">1.53</td>
    </tr>
    <tr>
      <td id="T_25a6c_row5_col0" class="data row5 col0">Aston Villa</td>
      <td id="T_25a6c_row5_col1" class="data row5 col1">0.79</td>
      <td id="T_25a6c_row5_col2" class="data row5 col2">2.63</td>
    </tr>
    <tr>
      <td id="T_25a6c_row6_col0" class="data row6 col0">West Ham</td>
      <td id="T_25a6c_row6_col1" class="data row6 col1">0.60</td>
      <td id="T_25a6c_row6_col2" class="data row6 col2">1.73</td>
    </tr>
    <tr>
      <td id="T_25a6c_row7_col0" class="data row7 col0">Everton</td>
      <td id="T_25a6c_row7_col1" class="data row7 col1">1.05</td>
      <td id="T_25a6c_row7_col2" class="data row7 col2">1.68</td>
    </tr>
    <tr>
      <td id="T_25a6c_row8_col0" class="data row8 col0">Newcastle Utd</td>
      <td id="T_25a6c_row8_col1" class="data row8 col1">0.65</td>
      <td id="T_25a6c_row8_col2" class="data row8 col2">2.35</td>
    </tr>
    <tr>
      <td id="T_25a6c_row9_col0" class="data row9 col0">Burnley</td>
      <td id="T_25a6c_row9_col1" class="data row9 col1">2.50</td>
      <td id="T_25a6c_row9_col2" class="data row9 col2">2.50</td>
    </tr>
  </tbody>
</table>
</td><td><style type="text/css">
</style>
<table style="display:inline; margin-right: 10px;" id="T_5035b">
  <thead>
    <tr>
      <th id="T_5035b_level0_col0" class="col_heading level0 col0">Team</th>
      <th id="T_5035b_level0_col1" class="col_heading level0 col1">xG against City</th>
      <th id="T_5035b_level0_col2" class="col_heading level0 col2">xG for City</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="T_5035b_row0_col0" class="data row0 col0">Arsenal</td>
      <td id="T_5035b_row0_col1" class="data row0 col1">1.58</td>
      <td id="T_5035b_row0_col2" class="data row0 col2">0.58</td>
    </tr>
    <tr>
      <td id="T_5035b_row1_col0" class="data row1 col0">Chelsea</td>
      <td id="T_5035b_row1_col1" class="data row1 col1">1.84</td>
      <td id="T_5035b_row1_col2" class="data row1 col2">0.84</td>
    </tr>
    <tr>
      <td id="T_5035b_row2_col0" class="data row2 col0">Liverpool</td>
      <td id="T_5035b_row2_col1" class="data row2 col1">2.05</td>
      <td id="T_5035b_row2_col2" class="data row2 col2">0.89</td>
    </tr>
    <tr>
      <td id="T_5035b_row3_col0" class="data row3 col0">Manchester Utd</td>
      <td id="T_5035b_row3_col1" class="data row3 col1">1.79</td>
      <td id="T_5035b_row3_col2" class="data row3 col2">1.32</td>
    </tr>
    <tr>
      <td id="T_5035b_row4_col0" class="data row4 col0">Tottenham</td>
      <td id="T_5035b_row4_col1" class="data row4 col1">1.58</td>
      <td id="T_5035b_row4_col2" class="data row4 col2">1.21</td>
    </tr>
    <tr>
      <td id="T_5035b_row5_col0" class="data row5 col0">Aston Villa</td>
      <td id="T_5035b_row5_col1" class="data row5 col1">1.05</td>
      <td id="T_5035b_row5_col2" class="data row5 col2">1.16</td>
    </tr>
    <tr>
      <td id="T_5035b_row6_col0" class="data row6 col0">West Ham</td>
      <td id="T_5035b_row6_col1" class="data row6 col1">1.53</td>
      <td id="T_5035b_row6_col2" class="data row6 col2">1.13</td>
    </tr>
    <tr>
      <td id="T_5035b_row7_col0" class="data row7 col0">Everton</td>
      <td id="T_5035b_row7_col1" class="data row7 col1">1.37</td>
      <td id="T_5035b_row7_col2" class="data row7 col2">0.95</td>
    </tr>
    <tr>
      <td id="T_5035b_row8_col0" class="data row8 col0">Newcastle Utd</td>
      <td id="T_5035b_row8_col1" class="data row8 col1">1.18</td>
      <td id="T_5035b_row8_col2" class="data row8 col2">1.35</td>
    </tr>
    <tr>
      <td id="T_5035b_row9_col0" class="data row9 col0">Burnley</td>
      <td id="T_5035b_row9_col1" class="data row9 col1">1.00</td>
      <td id="T_5035b_row9_col2" class="data row9 col2">3.00</td>
    </tr>
  </tbody>
</table>
</td></tr></tbody></table>
</div>
</div>
</section>
<section id="expected-goals-under-pep" class="level2">
<h2 class="anchored" data-anchor-id="expected-goals-under-pep">Expected goals under Pep</h2>
<div class="cell" data-scrolled="true" data-execution_count="42">
<div class="cell-output cell-output-display">

<table style="display:inline; margin-right: 10px;"><tbody><tr><th>Home games</th><th>Away games</th></tr><tr><td><style type="text/css">
</style>
<table style="display:inline; margin-right: 10px;" id="T_76608">
  <thead>
    <tr>
      <th id="T_76608_level0_col0" class="col_heading level0 col0">Team</th>
      <th id="T_76608_level0_col1" class="col_heading level0 col1">xG against City</th>
      <th id="T_76608_level0_col2" class="col_heading level0 col2">xG for City</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="T_76608_row0_col0" class="data row0 col0">Arsenal</td>
      <td id="T_76608_row0_col1" class="data row0 col1">0.50</td>
      <td id="T_76608_row0_col2" class="data row0 col2">2.83</td>
    </tr>
    <tr>
      <td id="T_76608_row1_col0" class="data row1 col0">Chelsea</td>
      <td id="T_76608_row1_col1" class="data row1 col1">1.00</td>
      <td id="T_76608_row1_col2" class="data row1 col2">2.00</td>
    </tr>
    <tr>
      <td id="T_76608_row2_col0" class="data row2 col0">Liverpool</td>
      <td id="T_76608_row2_col1" class="data row2 col1">0.83</td>
      <td id="T_76608_row2_col2" class="data row2 col2">2.50</td>
    </tr>
    <tr>
      <td id="T_76608_row3_col0" class="data row3 col0">Manchester Utd</td>
      <td id="T_76608_row3_col1" class="data row3 col1">1.50</td>
      <td id="T_76608_row3_col2" class="data row3 col2">1.67</td>
    </tr>
    <tr>
      <td id="T_76608_row4_col0" class="data row4 col0">Tottenham</td>
      <td id="T_76608_row4_col1" class="data row4 col1">1.33</td>
      <td id="T_76608_row4_col2" class="data row4 col2">2.33</td>
    </tr>
    <tr>
      <td id="T_76608_row5_col0" class="data row5 col0">Aston Villa</td>
      <td id="T_76608_row5_col1" class="data row5 col1">0.67</td>
      <td id="T_76608_row5_col2" class="data row5 col2">2.67</td>
    </tr>
    <tr>
      <td id="T_76608_row6_col0" class="data row6 col0">West Ham</td>
      <td id="T_76608_row6_col1" class="data row6 col1">0.67</td>
      <td id="T_76608_row6_col2" class="data row6 col2">2.00</td>
    </tr>
    <tr>
      <td id="T_76608_row7_col0" class="data row7 col0">Everton</td>
      <td id="T_76608_row7_col1" class="data row7 col1">0.67</td>
      <td id="T_76608_row7_col2" class="data row7 col2">2.50</td>
    </tr>
    <tr>
      <td id="T_76608_row8_col0" class="data row8 col0">Newcastle Utd</td>
      <td id="T_76608_row8_col1" class="data row8 col1">0.40</td>
      <td id="T_76608_row8_col2" class="data row8 col2">3.40</td>
    </tr>
    <tr>
      <td id="T_76608_row9_col0" class="data row9 col0">Burnley</td>
      <td id="T_76608_row9_col1" class="data row9 col1">0.17</td>
      <td id="T_76608_row9_col2" class="data row9 col2">3.67</td>
    </tr>
  </tbody>
</table>
</td><td><style type="text/css">
</style>
<table style="display:inline; margin-right: 10px;" id="T_7ee1f">
  <thead>
    <tr>
      <th id="T_7ee1f_level0_col0" class="col_heading level0 col0">Team</th>
      <th id="T_7ee1f_level0_col1" class="col_heading level0 col1">xG against City</th>
      <th id="T_7ee1f_level0_col2" class="col_heading level0 col2">xG for City</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="T_7ee1f_row0_col0" class="data row0 col0">Arsenal</td>
      <td id="T_7ee1f_row0_col1" class="data row0 col1">0.50</td>
      <td id="T_7ee1f_row0_col2" class="data row0 col2">2.17</td>
    </tr>
    <tr>
      <td id="T_7ee1f_row1_col0" class="data row1 col0">Chelsea</td>
      <td id="T_7ee1f_row1_col1" class="data row1 col1">1.17</td>
      <td id="T_7ee1f_row1_col2" class="data row1 col2">1.17</td>
    </tr>
    <tr>
      <td id="T_7ee1f_row2_col0" class="data row2 col0">Liverpool</td>
      <td id="T_7ee1f_row2_col1" class="data row2 col1">1.83</td>
      <td id="T_7ee1f_row2_col2" class="data row2 col2">1.67</td>
    </tr>
    <tr>
      <td id="T_7ee1f_row3_col0" class="data row3 col0">Manchester Utd</td>
      <td id="T_7ee1f_row3_col1" class="data row3 col1">0.67</td>
      <td id="T_7ee1f_row3_col2" class="data row3 col2">1.33</td>
    </tr>
    <tr>
      <td id="T_7ee1f_row4_col0" class="data row4 col0">Tottenham</td>
      <td id="T_7ee1f_row4_col1" class="data row4 col1">1.33</td>
      <td id="T_7ee1f_row4_col2" class="data row4 col2">0.67</td>
    </tr>
    <tr>
      <td id="T_7ee1f_row5_col0" class="data row5 col0">Aston Villa</td>
      <td id="T_7ee1f_row5_col1" class="data row5 col1">1.00</td>
      <td id="T_7ee1f_row5_col2" class="data row5 col2">3.33</td>
    </tr>
    <tr>
      <td id="T_7ee1f_row6_col0" class="data row6 col0">West Ham</td>
      <td id="T_7ee1f_row6_col1" class="data row6 col1">0.67</td>
      <td id="T_7ee1f_row6_col2" class="data row6 col2">3.33</td>
    </tr>
    <tr>
      <td id="T_7ee1f_row7_col0" class="data row7 col0">Everton</td>
      <td id="T_7ee1f_row7_col1" class="data row7 col1">1.17</td>
      <td id="T_7ee1f_row7_col2" class="data row7 col2">2.00</td>
    </tr>
    <tr>
      <td id="T_7ee1f_row8_col0" class="data row8 col0">Newcastle Utd</td>
      <td id="T_7ee1f_row8_col1" class="data row8 col1">1.40</td>
      <td id="T_7ee1f_row8_col2" class="data row8 col2">2.40</td>
    </tr>
    <tr>
      <td id="T_7ee1f_row9_col0" class="data row9 col0">Burnley</td>
      <td id="T_7ee1f_row9_col1" class="data row9 col1">0.50</td>
      <td id="T_7ee1f_row9_col2" class="data row9 col2">2.00</td>
    </tr>
  </tbody>
</table>
</td></tr></tbody></table>
</div>
</div>
<p>As we can see, Manchester City’s xG changed and improved across all the teams for home and away games under Pep Guardiola. This is true for notable teams like Arsenal, Chelsea, Manchester United and Liverpool. For teams like Everton and West Ham away, the xG has been turned around in favor of Manchester City since 2016 when Guardiola took charge.</p>
</section>
<section id="tweet-city-does-manchester-city-have-no-fans" class="level2">
<h2 class="anchored" data-anchor-id="tweet-city-does-manchester-city-have-no-fans">Tweet city: does Manchester City have no fans?</h2>
<p><img src="tweet.webp" alt="Manchester City Logo" width="400" height="300" align="center"></p>
<p>There is a general belief in the Premier League that Manchester City have no fans or have ‘plastic fans’. On the other hand, Manchester City fans like myself believe that we are overly hated and spoken negatively about by rival fans. I decided to investigate these claims using nearly 140 000 tweets that were filtered for the hashtags : #ManchesterCity, #Mancity or #MCFC. The tweets in the dataset are from July to October in 2020 which captures the end of the pre-season and the first half of the season ending in 2021. I was also interested inseeing what the discourse about Manchester City in this season was and what the general sentiment carried by the tweets was.</p>
<div class="cell" data-execution_count="45">
<div class="cell-output cell-output-error">
<pre><code>KeyError: 'date'</code></pre>
</div>
</div>
<section id="sentiment-analysis" class="level3">
<h3 class="anchored" data-anchor-id="sentiment-analysis">Sentiment analysis</h3>
<p>To investigate whether Manchester City is really hated, I used the nltk package to calculate the polarity of each tweet and assigned them labels as neutral, positive or neutral based on their score.</p>
<p>From the plot of sentiment distribution we can see that most of the tweets were positive and neutral and a small number of them were negative. This means that contrary to my belief, people generally speak more positively than negatively in their discourse of Manchester City on twitter - at least in reference to this time period. We could argue that Manchester City has a lot of fans, given that the conversations are highly positive. If not, thn rival fans engage in fan behavior towards Manchester City ;)</p>
</section>
<section id="distribution-of-tweets-captured" class="level3">
<h3 class="anchored" data-anchor-id="distribution-of-tweets-captured">Distribution of tweets captured</h3>
<p>To truly capture the nature of the discourse about Manchester City, I also wanted to capture how the tweets frequency varied for the time period capture aggregated by sentiment. The plot below illustrates this.</p>
<p>From the plot, we can see that the highest volume of tweets was generated in the later part of the pre_season (2741 tweets on July 19) when Manchester City lost the FA Cup semi final to Arsenal . The tweets fluctuated but dropped to their lowest in September (25 tweets on September 19). Positive tweets were more frequent generally over the time period and always outnumbered negative tweets. We can argue that overall, people spoke positively about Manchester City on any given day than they did negatively. It is important to note that negative tweets may also capture part of Manchester City’s fan base given the emotions carried after losing a game or exiting a competition. Some people’s tweets might feature frequently over this time period which means that this is by no means an indicator of the number of fans Manchester City has, coupled with the fact that even rivals or neutrals also tweet about the club.</p>
</section>
<section id="wordcloud" class="level3">
<h3 class="anchored" data-anchor-id="wordcloud">Wordcloud</h3>
<p>I also generated a wordcloud so that I could see what words featured frequently in the tweets and gain insights on some of the conversations.</p>
<p>From the word cloud we can see that some of the more popular names and words that featured are Ferran Torres, (Kevin) de Bruyne, Pep Guardiola, David Silva and Lionel Messi. Some club names were also part of the tweets including Real Madrid, Barcelona, Chelsea and Valencia. Some football terms also showed up such as FA Cup, Chamions League, players transfer and away kit.</p>
</section>
</section>
</section>
<section id="conclusion-limitations" class="level1">
<h1>Conclusion &amp; Limitations</h1>
<p>There is no doubt that Manchester City have improved in their style of play and in their perforance. However, there are a lot of factors that affect the performance of a football team. To accurately potray Manchester City’s improvement under Pep Guardiola, some of these factors need to be taken into account.</p>
</section>
<section id="future-work" class="level1">
<h1>Future work</h1>
<p>I hope to build on this project by gathering other stats, for example in other domestic competitions like the FA cup and the League Cup to see how Manchester City have fared in competitions outside the premier league. I also want to look into the tactical analysis to see how posession, defense and attack have evolved for Manchester City compared to previous managers. Lastly, I want to extend the project to look at each individual manager in Premier League history so that their individual contributions to the team’s managerial history can be clearly seen. It would also be interesting to extend the project to teams like Manchester United who have been in the Premier league for a longer time and whose performances have regressed in recent times.</p>
</section>
<section id="references" class="level1">
<h1>References</h1>
<section id="datasets" class="level2">
<h2 class="anchored" data-anchor-id="datasets">Datasets</h2>
<p>Premier League dataset: https://www.kaggle.com/datasets/evangower/premier-league-matches-19922022</p>
<p>Twitter dataset: https://www.kaggle.com/datasets/wjia26/epl-teams-twitter-sentiment-dataset</p>
</section>
<section id="python-packages" class="level2">
<h2 class="anchored" data-anchor-id="python-packages">Python packages</h2>
<p>Harris, C. R., Millman, K. J., van der Walt, S. J., Gommers, R., Virtanen, P., Cournapeau, D., … Oliphant, T. E. (2020). Array programming with NumPy. Nature, 585, 357–362. https://doi.org/10.1038/s41586-020-2649-2</p>
<p>McKinney, W., &amp; others. (2010). Data structures for statistical computing in python. In Proceedings of the 9th Python in Science Conference (Vol. 445, pp.&nbsp;51–56).</p>
<p>Hunter, J. D. (2007). Matplotlib: A 2D graphics environment. Computing in Science &amp; Engineering, 9(3), 90–95.</p>
<p>Bird, S., Klein, E., &amp; Loper, E. (2009). Natural language processing with Python: analyzing text with the natural language toolkit. ” O'Reilly Media, Inc.”</p>
<p>P'erez, Fernando, &amp; Granger, B. E. (2007). IPython: a system for interactive scientific computing. Computing in Science &amp; Engineering, 9(3).</p>
<p>Pedregosa, F., Varoquaux, Ga”el, Gramfort, A., Michel, V., Thirion, B., Grisel, O., … others. (2011). Scikit-learn: Machine learning in Python. Journal of Machine Learning Research, 12(Oct), 2825–2830.</p>
<p>Oesper, L., Merico, D., Isserlin, R., &amp; Bader, G. D. (2011). WordCloud: a Cytoscape plugin to create a visual semantic summary of networks. Source Code for Biology and Medicine, 6(1), 7.</p>
<p>Van Rossum, G. (2020). The Python Library Reference, release 3.8.2. Python Software Foundation.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>